#include <ESP8266WiFi.h>
#include <WiFiUdp.h>
#include "DHT.h"
#define DHTTYPE DHT11
#define WIFI_SSID "lab"
#define WIFI_PASS "12345678"
#define UDP_PORT 4210
DHT dht(D5, DHT11);

WiFiUDP UDP;
char packet[255];
char reply[] = "Packet received!";

void setup() {
  Serial.begin(115200);
  Serial.println();
  Serial.println(F("DHTxx test!"));
  dht.begin();

  WiFi.begin(WIFI_SSID, WIFI_PASS);

  Serial.print("Connecting to ");
  Serial.print(WIFI_SSID);

  while(WiFi.status()!=WL_CONNECTED)
  {
    delay(2000);
    Serial.print(".");
  }
 

  Serial.println();
  Serial.print("Connected! IP address: ");
  Serial.println(WiFi.localIP());


  UDP.begin(UDP_PORT);
  Serial.print("Listening on UDP port ");
  Serial.println(UDP_PORT);
}

void loop() {
  int h = dht.readHumidity();
  int t = dht.readTemperature();
  delay(2000);
  UDP.beginPacket(UDP.remoteIP(), UDP.remotePort());
  UDP.write(reply);
  UDP.endPacket();
  UDP.println(t);
  UDP.println(h);
  Serial.println(F("Humidity:\n "));
  Serial.println(h);

}
